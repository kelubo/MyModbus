# 告警功能快速开始

## 5分钟快速配置告警

### 步骤1: 启动系统

```bash
npm start
```

访问 http://localhost:3000

### 步骤2: 配置通知渠道（可选）

#### 方式A: 使用企业微信（最简单）

1. 在企业微信群中添加"群机器人"
2. 复制Webhook地址
3. 进入系统"告警管理" > "通知设置" > "企业微信"
4. 粘贴Webhook地址，勾选"启用"
5. 点击"发送测试"验证

#### 方式B: 使用钉钉

1. 在钉钉群中添加"自定义机器人"
2. 复制Webhook地址
3. 进入系统"告警管理" > "通知设置" > "钉钉"
4. 粘贴Webhook地址，勾选"启用"
5. 点击"发送测试"验证

#### 方式C: 使用邮件

1. 准备SMTP邮箱（如Gmail、QQ邮箱）
2. 进入系统"告警管理" > "通知设置" > "邮件通知"
3. 填写SMTP配置：
   - SMTP服务器: smtp.gmail.com
   - 端口: 587
   - 发件人邮箱: your-email@gmail.com
   - 用户名: your-email@gmail.com
   - 密码: 应用专用密码或授权码
4. 点击"发送测试"验证

### 步骤3: 创建告警规则

1. 进入"告警管理"标签页
2. 点击"添加规则"
3. 填写规则信息：
   ```
   规则名称: 温度过高告警
   选择设备: [选择您的设备]
   告警条件: 大于 (>)
   阈值: 80
   告警级别: 警告
   ```
4. 配置通知（可选）：
   ```
   邮件通知: admin@example.com
   企业微信通知: ✓
   ```
5. 点击"保存"

### 步骤4: 测试告警

1. 启动数据采集
2. 等待设备数据超过阈值
3. 观察告警触发：
   - 页面右上角弹出通知
   - 活动告警列表显示新告警
   - 收到邮件/企业微信/钉钉通知

## 常用配置示例

### 示例1: 温度监控（仅系统通知）

```
规则名称: 温度监控
设备: 温度传感器
条件: 大于
阈值: 80
级别: 警告
通知: 无
```

### 示例2: 压力监控（邮件通知）

```
规则名称: 压力过高
设备: 压力传感器
条件: 大于等于
阈值: 100
级别: 严重
邮件通知: admin@example.com, operator@example.com
```

### 示例3: 关键设备监控（全渠道通知）

```
规则名称: 关键设备异常
设备: 核心设备
条件: 大于
阈值: 90
级别: 严重
邮件通知: admin@example.com
短信通知: 13800138000
企业微信通知: ✓
钉钉通知: ✓
```

## 快速故障排除

### 问题1: 告警未触发
- 检查规则是否启用（绿色"启用"状态）
- 确认数据采集正在运行
- 验证阈值设置是否正确

### 问题2: 通知未收到
- 使用"发送测试"功能验证配置
- 检查邮箱垃圾邮件文件夹
- 确认Webhook地址正确
- 查看服务器控制台错误信息

### 问题3: 告警太多
- 调整阈值，避免频繁触发
- 降低告警级别
- 减少通知渠道

## 下一步

- 查看完整文档: [docs/ALARM_GUIDE.md](docs/ALARM_GUIDE.md)
- 配置多个告警规则
- 设置不同级别的告警
- 优化通知策略

## 技术支持

如遇问题，请查看：
1. 服务器控制台日志
2. 浏览器控制台错误
3. 完整文档 docs/ALARM_GUIDE.md
